<div bsModal #modal="bs-modal" class="modal fade"
    [config]="{backdrop: 'static'}" tabindex="-1"
    role="dialog" aria-labelledby="modal" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-body">
        <!-- Submission Sending -->
        <div *ngIf="state == 0">
          <div class="row">
            <h3>Submitting your code...</h3>
          </div>
          <div class="loading-spinner center-block"><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div>
          <input (click)="cancel()" class="btn btn-lg btn-default" type="button" value="Cancel">
        </div>
        <!-- Results Received -->
        <div *ngIf="state == 1">
          <!-- Correct Solution -->
          <div *ngIf="result.passed">
            <div class="row">
              <i fa [name]="'check'"></i>
            </div>
            <div class="row">
              <h4 class="green">Correct</h4>
            </div>
          </div>
          <!-- Incorrect Solution -->
          <!-- Note: cannot simply do !result.passed because that checks falsiness -->
          <div *ngIf="result.passed === false">
            <div class="row">
              <i fa [name]="'times'"></i>
            </div>
            <div class="row">
              <h4 class="red">Incorrect</h4>
            </div>
            <div class="row">
              <div *ngFor="let testResult of result.results; let i = index">
                Test {{i + 1}}:
                <div *ngIf="testResult.error">
                  {{testResult.error}}
                </div>
                <div *ngIf="testResult.differences">
                  <div *ngFor="let difference of testResult.differences">
                    Expected: {{difference.expected}}, Actual: {{difference.actual}}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Code Error -->
          <div *ngIf="result.error">
            <div class="row">
              <i fa [name]="'times'"></i>
            </div>
            <div class="row">
              <h4 class="red">Compilation Error</h4>
            </div>
            <div class="row">
              <p>{{result.error}}</p>
            </div>
          </div>

          <input (click)="close()" class="btn btn-default" type="button" value="Close">
        </div>
        <!-- Server Error -->
        <div *ngIf="state == 2">
          <div class="row">
            <i fa [name]="'exclamation-circle'"></i>
          </div>
          <div class="row">
            <h4>The server is unreachable!</h4>
          </div>
          <div class="clearfix">
            <input (click)="retry()" class="btn btn-primary pull-right" type="button" value="Retry">
            <input (click)="close()" class="btn btn-default pull-left" type="button" value="Close">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
