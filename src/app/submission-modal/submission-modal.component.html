<div bsModal #modal="bs-modal" class="modal fade"
    [config]="{backdrop: 'static'}" tabindex="-1"
    role="dialog" aria-labelledby="modal" aria-hidden="true">
  <div class="vertical-alignment-helper">
    <div class="modal-dialog vertical-align-center">
      <div class="modal-content">
        <div class="modal-body">
          <!-- Submission Sending -->
          <div *ngIf="state == 0">
            <h3>Submitting your code...</h3>
            <div class="row">
              <img class="center-block" src="assets/loading.gif">
            </div>
            <input (click)="cancel()" class="btn btn-default" type="button" value="Cancel">
          </div>
          <!-- Results Received -->
          <div *ngIf="state == 1">
            <!-- Correct Solution -->
            <div *ngIf="result.status === 'Pass'">
              <i fa class="green" [name]="'check'" [size]=4></i>
              <h3 class="result-status green">Correct</h3>
              <p class="result-time">{{result.execTime | precision:5}} seconds</p>
            </div>
            <!-- Incorrect Solution -->
            <div *ngIf="result.status === 'Fail'">
              <i fa class="red" [name]="'times'" [size]=4></i>
              <h3 class="result-status red">Incorrect</h3>
              <!-- TODO: address the revealing output -->
              <div *ngIf="result.results" class="row">
                <div *ngFor="let testResult of result.results; let i = index">
                  Test {{i + 1}}:
                  <div *ngIf="testResult.status">
                    {{testResult.status}}
                  </div>
                  <div *ngIf="testResult.differences">
                    <div *ngFor="let difference of testResult.differences">
                      Expected: {{difference.expected}}, Actual: {{difference.actual}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Timeout -->
            <div *ngIf="result.status === 'Timeout'">
              <i fa class="red" [name]="'clock-o'" [size]=4></i>
              <h3 class="result-status red">Time Limit Exceeded</h3>
            </div>
            <!-- Compilation Error -->
            <div *ngIf="result.status === 'CompilationError'">
              <i fa class="red" [name]="'exclamation-circle'" [size]=4></i>
              <h3 class="result-status red">Compilation Error</h3>
              <div class="well">
                <p class="result-error-message" [innerHTML]="result.message | ansiToHtml"></p>
              </div>
            </div>
            <!-- Runtime Error -->
            <div *ngIf="result.status === 'RuntimeError'">
              <i fa class="red" [name]="'exclamation-circle'" [size]=4></i>
              <h3 class="result-status red">Runtime Error</h3>
              <div class="well">
                <p class="result-error-message" [innerHTML]="result.message | ansiToHtml"></p>
              </div>
            </div>
            <input (click)="close()" class="btn btn-default" type="button" value="Close">
          </div>
          <!-- Server Error -->
          <div *ngIf="state == 2">
            <i fa class="red" [name]="'exclamation-triangle'" [size]=4></i>
            <h3>The server is unreachable!</h3>
            <div class="clearfix">
              <input (click)="retry()" class="btn btn-primary pull-right" type="button" value="Retry">
              <input (click)="close()" class="btn btn-default pull-left" type="button" value="Close">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
